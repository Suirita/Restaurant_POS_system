<div class="relative" [ngClass]="className" #selectRef>
  <!-- Select Trigger -->
  <button
    type="button"
    (click)="toggleDropdown()"
    [disabled]="disabled"
    class="text-gray-900 bg-white flex h-9.5 w-full items-center justify-between rounded-lg border border-gray-200 shadow-xs px-3 py-1.5 text-sm disabled:opacity-50"
    aria-haspopup="listbox"
    [attr.aria-expanded]="isOpen"
  >
    <span
      [ngClass]="selectedOption ? 'text-foreground' : 'text-muted-foreground'"
    >
      {{ selectedOption ? selectedOption.label : placeholder }}
    </span>

    <!-- Chevron Icon -->
    <i-lucide
      [img]="ChevronDown"
      class="h-4 w-4 transition-transform duration-200"
      [ngClass]="{ 'rotate-180': isOpen }"
    ></i-lucide>
  </button>

  <!-- Dropdown Options -->
  <div
    *ngIf="isOpen"
    class="absolute z-50 w-full mt-1 bg-white rounded-lg border border-gray-200 shadow-sm"
    role="listbox"
  >
    <div class="p-1">
      <div
        *ngFor="let option of options; let i = index"
        (click)="selectOption(option.value)"
        class="relative flex select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none"
        [ngClass]="{
          'bg-accent text-accent-foreground': focusedIndex === i || value === option.value,
          'font-medium': value === option.value
        }"
        role="option"
        [attr.aria-selected]="value === option.value"
      >
        <!-- Check icon for selected option -->
        <i-lucide
          [img]="Check"
          *ngIf="value === option.value"
          class="h-4 w-4 mr-2"
        ></i-lucide>

        <span [ngClass]="{ 'ml-6': value !== option.value }">
          {{ option.label }}
        </span>
      </div>
    </div>
  </div>
</div>
